[Application]
FileLogger\Enabled=true
FileLogger\Age=7
FileLogger\AgeType=0
FileLogger\Backup=false
FileLogger\DeleteOld=true
FileLogger\MaxSizeBytes=5242880
FileLogger\Path=/config/qBittorrent/logs

[BitTorrent]
Session\DefaultSavePath=/downloads/complete
Session\TempPath=/downloads/incomplete
Session\TempPathEnabled=true

# =============================================================
#  连接限制 — 5000种子防崩溃核心
# =============================================================
Session\MaxConnections=2500
Session\MaxConnectionsPerTorrent=15
Session\MaxUploads=1500
Session\MaxUploadsPerTorrent=5
# 逻辑: 全局2500兜底，每种子最多15但实际被全局限制均摊
# 5000种子实际每种子平均 2500/5000 ≈ 0.5 连接，做种足够

# =============================================================
#  速度限制 — 上传4MB/s 下载8MB/s
# =============================================================
Session\GlobalDLSpeedLimit=8192
Session\GlobalUPSpeedLimit=4096
# 单位: KiB/s。100Mbps ≈ 12500KiB/s，留余量给系统
Session\AlternativeGlobalDLSpeedLimit=2048
Session\AlternativeGlobalUPSpeedLimit=1024
Session\UseAlternativeGlobalSpeedLimit=false

# =============================================================
#  队列管理 — 做种无限 / 下载限5
# =============================================================
Session\MaxActiveDownloads=5
Session\MaxActiveTorrents=-1
Session\MaxActiveUploads=-1
# -1 = 无限制，所有种子同时做种！
# 下载限5个，保护SSD的IOPS
Session\QueueingSystemEnabled=true
Session\IgnoreSlowTorrentsForQueueing=true
Session\SlowTorrentsDownloadRate=2
Session\SlowTorrentsUploadRate=2
Session\SlowTorrentsInactivityTimer=600

# =============================================================
#  做种策略 — 刷做种时间核心！永不停种！
# =============================================================
Session\GlobalMaxRatio=-1
Session\MaxRatioAction=0
Session\GlobalMaxSeedingMinutes=-1
Session\GlobalMaxInactiveSeedingMinutes=-1
# 全部 -1 = 永不因分享率/时间/空闲而停止做种

# =============================================================
#  磁盘缓存 — 8GB内存优化核心！保护SSD！
# =============================================================
Session\DiskCacheSize=2048
# 2048MB = 2GB 磁盘缓存
# 容器4GB限制: ~2GB进程 + 2GB缓存 = 刚好用满
Session\DiskCacheTTL=120
# 缓存保留120秒再刷盘

Session\DiskIOReadMode=1
Session\DiskIOWriteMode=1
# 1 = EnableOSCache，与DiskCache协同

Session\DiskIOType=1
# 1 = mmap 内存映射，对大量小文件更高效

Session\DiskQueueSize=16777216
# 16MB 磁盘队列

Session\FilePoolSize=500
# 同时打开文件数上限。5000种子不可能全开，500合理

Session\HashingThreads=2
# 校验线程，4核给2个

Session\AsyncIOThreadsCount=8
# 异步IO线程 = 4核 × 2

# =============================================================
#  预分配 — 关闭！小种子多，预分配浪费IO
# =============================================================
Session\PreallocationEnabled=false

# =============================================================
#  协议设置
# =============================================================
Session\Encryption=1
# 1 = 允许加密 (Prefer encryption)
Session\uTPEnabled=true
Session\DHTEnabled=true
Session\PeXEnabled=true
Session\LSDEnabled=false
# LSD在VPS上无意义
Session\AnnounceToAllTrackers=false
Session\AnnounceToAllTiers=true
Session\BTProtocol=0
# 0 = TCP + uTP 都启用

# =============================================================
#  网络
# =============================================================
Session\Port=6881
Session\UseRandomPort=false
Connection\PortRangeMin=6881
Connection\UPnP=false
# VPS不需要UPnP

[Preferences]
# =============================================================
#  WebUI
# =============================================================
WebUI\Enabled=true
WebUI\Port=8080
WebUI\LocalHostAuth=false
WebUI\AuthSubnetWhitelistEnabled=false
WebUI\Username=admin
# 密码在首次WebUI登录时修改，或通过容器日志获取初始密码

# =============================================================
#  磁盘空间保护 — 50GB SSD 救命设置！
# =============================================================
Downloads\DiskSpaceReservation=true
Downloads\DiskSpaceReservationSize=20480
# 单位 MB = 20GB 预留
# 50GB总空间 - 20GB预留 = 30GB可用于PT数据
# 当剩余空间 < 20GB 时，qBittorrent 自动拒绝新下载！

Downloads\SavePath=/downloads/complete
Downloads\TempPath=/downloads/incomplete
Downloads\TempPathEnabled=true
Downloads\PreAllocation=false

# =============================================================
#  RSS — 内置自动下载 (替代外部脚本，零风险!)
# =============================================================
RSS\AutoDownloader\Enabled=true
RSS\Session\EnableProcessing=true
RSS\Session\RefreshInterval=15
# 每15分钟自动刷新RSS
RSS\Session\MaxArticlesPerFeed=200